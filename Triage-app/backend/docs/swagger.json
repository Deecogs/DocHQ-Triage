{
    "swagger": "2.0",
    "info": {
        "description": "API documentation for AI-Bot-DeeCogs",
        "title": "AI-Bot-DeeCogs API",
        "contact": {},
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/",
    "paths": {
        "/assessments": {
            "post": {
                "description": "Creates a new assessment for the user",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Assessments"
                ],
                "summary": "Start a new assessment",
                "parameters": [
                    {
                        "description": "Assessment Data",
                        "name": "assessment",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/services.Assessment"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/assessments/:id/physio-calls": {
            "get": {
                "description": "Retrieves all physio calls for a specific assessment",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Physio Calls"
                ],
                "summary": "Get physio calls",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Assessment ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/services.PhysioCall"
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/assessments/{id}": {
            "get": {
                "description": "Retrieves the details of a specific assessment",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Assessments"
                ],
                "summary": "Get assessment details",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Assessment ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/services.Assessment"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/assessments/{id}/ai-analysis": {
            "get": {
                "description": "Retrieves AI-predicted results for an assessment",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "AI Analysis"
                ],
                "summary": "Get AI analysis results",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Assessment ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/services.AIAnalysis"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/assessments/{id}/chat": {
            "post": {
                "description": "Sends chat history to an AI model for physiotherapy assessment",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Assessments"
                ],
                "summary": "Send chat history for AI response",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Assessment ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Chat History",
                        "name": "chat_body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/services.ChatRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/services.ChatResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/assessments/{id}/physio-calls": {
            "post": {
                "description": "Schedules a physio call (immediate or scheduled) for a specific assessment",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Physio Calls"
                ],
                "summary": "Schedule a physio call",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Assessment ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Call Details",
                        "name": "call_data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/handlers.PhysioCallRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/services.PhysioCall"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/assessments/{id}/rom": {
            "get": {
                "description": "Retrieves pose model data and analysis results for an assessment",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ROM"
                ],
                "summary": "Get ROM analysis data",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Assessment ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/services.ROMAnalysis"
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "Submits pose model data and analysis results for an assessment",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ROM"
                ],
                "summary": "Submit ROM analysis data",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Assessment ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "ROM Data",
                        "name": "rom_data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/services.ROMAnalysis"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/assessments/{id}/self-care-plans": {
            "get": {
                "description": "Retrieves personalized self-care plans for an assessment",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Self-Care Plans"
                ],
                "summary": "Get self-care plans",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Assessment ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/services.SelfCarePlan"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/assessments/{id}/status": {
            "post": {
                "description": "Updates the status of an assessment",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Assessments"
                ],
                "summary": "Update assessment status",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Assessment ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Status Update",
                        "name": "status",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/auth/loginuser": {
            "post": {
                "description": "Authenticates a user with email and password",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Auth"
                ],
                "summary": "Login user",
                "parameters": [
                    {
                        "description": "User Credentials",
                        "name": "credentials",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/bothandler": {
            "get": {
                "description": "This is a bothandler API for demonstration purposes",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "demo"
                ],
                "summary": "bothandler API",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/handlers.BotHandlerResponse"
                        }
                    }
                }
            }
        },
        "/questions/update_answer/{id}": {
            "patch": {
                "description": "Updates the correct answer for a question and fetches the next question from the AI model",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Questionnaires"
                ],
                "summary": "Update correct answer and fetch the next question",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Question ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Correct Answer",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/handlers.CorrectAnswerRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/services.Question"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/questions/{id}": {
            "get": {
                "description": "Fetches a question along with all metadata by its ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Questionnaires"
                ],
                "summary": "Get a question by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Question ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/services.Question"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/users": {
            "post": {
                "description": "Creates a new user with the provided details",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Users"
                ],
                "summary": "Create a new user",
                "parameters": [
                    {
                        "description": "User Data",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/users/{id}": {
            "get": {
                "description": "Retrieves details of a user by ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Users"
                ],
                "summary": "Get user details",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "handlers.BotHandlerResponse": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string"
                }
            }
        },
        "handlers.CorrectAnswerRequest": {
            "type": "object",
            "required": [
                "correct_answer"
            ],
            "properties": {
                "correct_answer": {
                    "type": "string"
                }
            }
        },
        "handlers.PhysioCallRequest": {
            "type": "object",
            "required": [
                "call_type",
                "initiated_by"
            ],
            "properties": {
                "call_type": {
                    "description": "Immediate or Scheduled",
                    "type": "string"
                },
                "initiated_by": {
                    "type": "string"
                },
                "scheduled_time": {
                    "description": "Optional for immediate calls",
                    "type": "string"
                }
            }
        },
        "services.AIAnalysis": {
            "type": "object",
            "properties": {
                "analysed_results": {
                    "description": "JSONB type"
                },
                "assessment_id": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                }
            }
        },
        "services.Assessment": {
            "type": "object",
            "properties": {
                "anatomy_id": {
                    "type": "string"
                },
                "assessment_id": {
                    "type": "string"
                },
                "assessment_type": {
                    "type": "string"
                },
                "completion_percentage": {
                    "type": "number"
                },
                "end_time": {
                    "type": "string"
                },
                "start_time": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "user_id": {
                    "type": "string"
                }
            }
        },
        "services.ChatMessage": {
            "type": "object",
            "properties": {
                "response": {
                    "description": "AI response (optional)",
                    "type": "string"
                },
                "user": {
                    "type": "string"
                }
            }
        },
        "services.ChatRequest": {
            "type": "object",
            "properties": {
                "chat_history": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/services.ChatMessage"
                    }
                }
            }
        },
        "services.ChatResponse": {
            "type": "object",
            "properties": {
                "response": {
                    "type": "string"
                }
            }
        },
        "services.PhysioCall": {
            "type": "object",
            "properties": {
                "assessment_id": {
                    "type": "string"
                },
                "call_id": {
                    "type": "string"
                },
                "call_status": {
                    "description": "Scheduled, Completed, Cancelled",
                    "type": "string"
                },
                "call_type": {
                    "description": "Immediate or Scheduled",
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "initiated_by": {
                    "description": "User or System",
                    "type": "string"
                },
                "scheduled_time": {
                    "description": "NULL for immediate calls",
                    "type": "string"
                }
            }
        },
        "services.Question": {
            "type": "object",
            "properties": {
                "assessment_id": {
                    "type": "string"
                },
                "correct_answer": {
                    "description": "Correct answer if applicable",
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "input_mode": {
                    "description": "Input mode: text, speech, video",
                    "type": "string"
                },
                "options": {
                    "description": "JSONB type for options"
                },
                "question": {
                    "type": "string"
                },
                "question_id": {
                    "type": "string"
                },
                "user_answer": {
                    "description": "User's selected answer",
                    "type": "string"
                }
            }
        },
        "services.ROMAnalysis": {
            "type": "object",
            "properties": {
                "analysis_result": {
                    "type": "string"
                },
                "assessment_id": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "pose_model_data": {
                    "description": "JSONB type for pose model data"
                }
            }
        },
        "services.SelfCarePlan": {
            "type": "object",
            "properties": {
                "assessment_id": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "critical_flag": {
                    "type": "boolean"
                },
                "plan_name": {
                    "type": "string"
                },
                "suggested_exercises": {
                    "description": "JSONB for exercises"
                }
            }
        }
    }
}